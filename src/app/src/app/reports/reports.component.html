<h2>Reports:</h2>
<label>
  Click
  <button style="margin: 0 0 20px 0" (click)="getUsers()">View All Employees</button>
</label>
<table border="1">
  <tr>
    <td>Id</td>
    <td>Firstname</td>
    <td>Lastname</td>
    <td>Employee Code</td>
    <td>Department</td>
    <td>Manager</td>
  </tr>
  <tr *ngFor="let item of result">
    <td>{{item.userid}}</td>
    <td>{{item.firstname}}</td>
    <td>{{item.lastname}}</td>
    <td>{{item.code}}</td>
    <td>{{item.department}}</td>
    <td>{{item.manager}}</td>
  </tr>

</table>

<form style="padding: 20px 0 0 0" [formGroup]="filteredDataForm" (ngSubmit)="getFiltered()">
  <label>
    Then Filter by department
    <select formControlName="department">
      <option *ngFor="let department of departments" [ngValue]="department">
        {{department}}
      </option>
    </select>
  </label>
  <p>
    <button type="submit">Filter By Department</button>
  </p>
</form>
<table border="1">
  <tr>
    <td>Id</td>
    <td>Firstname</td>
    <td>Lastname</td>
    <td>Employee Code</td>
    <td>Department</td>
    <td>Manager</td>
  </tr>
  <tr *ngFor="let item of filtered">
    <td>{{item.userid}}</td>
    <td>{{item.firstname}}</td>
    <td>{{item.lastname}}</td>
    <td>{{item.code}}</td>
    <td>{{item.department}}</td>
    <td>{{item.manager}}</td>
  </tr>

</table>
<!-- <div style='float:left' class="table_select">
  <label>Select a Table</label>
  <br>
  <select [(ngModel)]="selectedTable" (change)="tableChanged()">
    <option *ngFor="let sel_table of tableNames" [value]="sel_table">{{sel_table}}</option>
  </select>
  <br>
  <div *ngIf="selectedTable">
    <label>Select the Key for [{{selectedTable}}]</label>
    <br>
    <select [(ngModel)]="tableKey">
      <option *ngFor="let sel_column of tableColumns" [value]="sel_column">{{sel_column}}</option>
    </select>
    <br>
  </div>
</div>
<div class="subtable_select" *ngIf="selectedTable">
  <label>Select a SubTable</label>
  <br>
  <select [(ngModel)]="selectedSubTable" (change)="subTableChanged()">
    <option *ngFor="let sel_table of tableNames" [value]="sel_table">{{sel_table}}</option>
  </select>
  <br>
  <div *ngIf="selectedSubTable">
    <label>Select the Key for [{{selectedSubTable}}]</label>
    <br>
    <select *ngIf="selectedSubTable" [(ngModel)]="subTableKey">
      <option *ngFor="let sel_column of subTableColumns" [value]="sel_column">{{sel_column}}</option>
    </select>
    <br>
  </div>
</div>
<div *ngIf="selectedTable && tableKey && selectedSubTable && subTableKey && tableData?.length > 0"
  class="data_retrieve">
  <br>
  <h2>Click an Entry from [{{selectedTable}}] to Expand the [{{selectedSubTable}}] Entities</h2>
  <table>
    <tr>
      <th *ngFor="let column of tableColumns">{{ column }}</th>
    </tr>
    <tr style='cursor:pointer' *ngFor="let row of tableData" (click)="rowClicked(row[tableKey])">
      <td *ngFor="let column of tableColumns">{{ row[column] }}</td>
    </tr>
  </table>
</div>
<div *ngIf="selectedSubTable && subTableColumns && subTableData?.length > 0">
  <br>
  <hr>
  <h2>Data from [{{selectedSubTable}}]</h2>
  <table>
    <tr>
      <th *ngFor="let column of subTableColumns">{{ column }}</th>
    </tr>
    <tr *ngFor="let row of subTableData">
      <td align=center *ngFor="let column of subTableColumns">{{ row[column] }}</td>
    </tr>
  </table>
</div> -->